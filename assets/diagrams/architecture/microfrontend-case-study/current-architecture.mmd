graph TB
    subgraph browser["Browser (User Session)"]
        spa["React SPA (Vite)"]
    end

    subgraph network["Network Layer"]
        nginx["NGINX"]
    end

    subgraph backend["Backend Services"]
        api["Flask API"]
        db["Database"]
    end

    spa -->|HTTP Request| nginx
    nginx -->|Route /api| api
    nginx -->|Route /static| spa

    api -->|Query/Write| db

    spa -->|Fetch| api

    style spa fill:#61dafb,stroke:#333,stroke-width:2px,color:#000
    style nginx fill:#009639,stroke:#333,stroke-width:2px,color:#fff
    style api fill:#0766d6,stroke:#333,stroke-width:2px,color:#fff
    style db fill:#336791,stroke:#333,stroke-width:2px,color:#fff

    classDef browserGroup fill:#f0f8ff,stroke:#333,stroke-width:1px
    classDef networkGroup fill:#f5f5f5,stroke:#333,stroke-width:1px
    classDef backendGroup fill:#f0f0f0,stroke:#333,stroke-width:1px

    class browser browserGroup
    class network networkGroup
    class backend backendGroup
